Current versions of nncase are already generating kmodel v5 files, but it seems it's not yet supported by MaixPy - calling KPU.load on a v5 file seems to throw random errors (see #423 #426 and #433 for examples), or sometimes just crash the firmware with no errors even reported.

So currently one needs to either use v0.2 nncase (which lacks some ops and doesn't support YoloX) or use Kendryte SDK instead of MaixPy.

07 September 2021


nncase Command Line Tools 1.5.0-
Copyright 2019-2021 Canaan Inc.
1. Import graph...
2. Optimize target independent...
3. Optimize target dependent...
4.1. Add quantize annotation...
4.2. Run calibration...
4.2.1. Collecting ranges...
4.3. Quantize graph...
5. Optimize target dependent after quantization...
6. Optimize modules...
7.1. Merge module regions...
7.2. Optimize buffer fusion...
7.3. Optimize target dependent after buffer fusion...
8. Generate code...
Fatal: Allocator has ran out of memory


compile kmodel
-rwxrwxrwx 1 pi pi 4.7M Jun 14  2021 cello_fp32.tflite
version 0.2
1. Import graph...
Fatal: Not supported tflite opcode: UNIDIRECTIONAL_SEQUENCE_LSTM
